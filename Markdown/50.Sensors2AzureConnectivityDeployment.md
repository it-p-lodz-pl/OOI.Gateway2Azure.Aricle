# Cloud to Sensors Field Level Connectivity

The main challenge of the solution in concern is to design a generic but reusable architecture that addresses interoperability of the two completely diverse contexts ruled by different requirements:

1. **machine-centric** reactive interoperability addressing real-time mobile applications
1. **human-centric** interactive web-based user graphical interface

As it was stated in Sec. 1 interoperability of the **machine-centric** cyber-physical systems and **human-centric** cloud-based front-end can be implemented applying one of the following scenarios:

- **direct interconnection** - cloud-based dedicated communication services allow to attach it to the cyber-physical system making up a consistent M2M communication network using a common protocol stack
- **gateway based interconnection** - native build-in communication services allows attaching the cloud to the cyber-physical system using an out-of-bound protocol stack

By design, the direct approach requires that the cloud has to be compliant with the interoperability standard the cyber-physical system uses. As a result, it becomes a consistent part of the cyber-physical system. To meet this requirement the cloud and cyber-physical system must

- use the same communication stack
- directly establish the same semantic-context
- directly establish the same security-context

Dat Transfer Object is the payload of the NetworkMessage exchanged over the network.

From the description covered by the Sec. and the Sec. the Azure supports the HTTP, AMQP, MQTT, but the PubSub Ethernet, UDP, AMQP, MQTT. If the Ethernet or UDP has been selected to build interconnection based on PubSub direc interoperability with the PubSub is impossible because the Azure doesn't offer these protocol as native communication services.

The Azure uses JSON based Data Transfer Object encoding and schema defined based on the solution metadata. The pubsub uses json and binary Data Transfer Object encoding. If JSON is used posibility to establich semantic contex depends on the Azure metadata definition. In case PubSub uses binary encoding stablishin inteconnection is imposible.

Azure and Pub uses different security mechanizms so establishing directtly security context is imposible at all

. For both the schema is different Data Transfer Object encoding

Described above differences of both solutions make this approach impractical and imposable to be applied in typical cases.



- **Architecture** - Domain model presenting relationship between the: Azure, PubSub Gateway, Device, Design and development tools
- **Connectivity** - Describe reactive nature of the Azure monitoring process data (telemetry) services.
- **Deployment phases**
  - Design
  - Gateway and devices registration
  - Authentication
  - Device/Service association
  - Device/Application association
  - Establishing session
    - Device/Device Template (Device Capability Model) association - establishing a semantic-context
    - Security management - establishing security-context
  - Interconnection - exchange of data
  - Maintenance

We have selected [IoT Central](https://docs.microsoft.com/azure/iot-central/core/) because:

- provides process data visualization user interface
- allows to describe devices using metadata containing telemetry data types
