# Cloud to Sensors Field Level Connectivity

## Architecture

### Introduction

As it was explained in Sect 1, to fallow the Industry 4.0 concept a hybrid environment integrating reactive Machine to Machine interconnection and interactive web-based user interface is required. The main challenge of the solution in concern is to design a generic and reusable architecture that addresses interoperability of these diverse interconnection scenarios ruled by different requirements, namely

1. **machine-centric** machine to machine real-time mobile interoperability
1. **human-centric** cloud-based front-end

Interconnection of the reactive **machine-centric** and interactive **human-centric** environments can be implemented by applying one of the following scenarios:

- **direct interconnection** - cloud-based dedicated communication services are engaged to attach it to the cyber-physical system making up a consistent M2M communication network using a common protocol stack
- **gateway based interconnection** - native build-in communication services allows attaching the cloud to the cyber-physical system using an out-of-bound protocol stack

Because, for the solution in concern assets interconnection is not enough, and additionally, their interoperability has to be expected. In this case, using the same communication stack must be recognized as only a necessary condition. To support interoperability common data understanding is required. By design, the direct approach requires that the cloud has to be compliant with the interoperability standard the cyber-physical system uses. As a result, it becomes a consistent part of the cyber-physical system. Additionally, to meet this requirement the cloud and cyber-physical systems have to

- directly establish the same semantic-context
- directly establish the same security-context

Possibility to establish common semantic-context in the multi-vendor environment makes communication standardization especially important. In this case it is required that the payload of the message (a Data Transfer Object - TDO) is standardized to be factored on the data gathering site and consumed on the ultimate destination data processing site. Security between the data origin and ultimate data destination refers to data protection measures (security-context) against malicious users. I is required that communicating parties are using the same cyber-security measures.

### why not direct

From the description covered by the Sec. and the Sec. the Azure supports the HTTP, AMQP, MQTT, but the PubSub Ethernet, UDP, AMQP, MQTT. If the Ethernet or UDP has been selected to build interconnection based on PubSub direc interoperability with the PubSub is impossible because the Azure doesn't offer these protocol as native communication services.

The Azure uses JSON based Data Transfer Object encoding and schema defined based on the solution metadata. The pubsub uses json and binary Data Transfer Object encoding. If JSON is used posibility to establich semantic contex depends on the Azure metadata definition. In case PubSub uses binary encoding stablishin inteconnection is imposible.

Azure and Pub uses different security mechanizms so establishing directtly security context is imposible at all

. For both the schema is different Data Transfer Object encoding

Described above differences of both solutions make this approach impractical and imposable to be applied in typical cases.

If the cyber-physical system uses protocols applicable only to local computer networks (e.g. multicast IP, Ethernet) interaction with the cloud requires remote agents. i.e. agents attached locally to the network.

field level gateway 

### why gateway

Fig. Architecture

- explain middleware concept
- explain Gateway that is derived from th middleware concept

 Middleware may be attached to the local network in case the Ethernet ot multicast IP are in use.

How does multicast IP work?
Using multicast, a source can send a single copy of data to a single multicast address, which is then distributed to an entire group of recipients. ... A source host sends data to a multicast group by simply setting the destination IP address of the datagram to be the multicast group address.

### why pubsub

### Why OOI

- **Connectivity** - Describe reactive nature of the Azure monitoring process data (telemetry) services.

We have selected [IoT Central](https://docs.microsoft.com/azure/iot-central/core/) because:

- provides process data visualization user interface
- allows to describe devices using metadata containing telemetry data types

### Why Azure
